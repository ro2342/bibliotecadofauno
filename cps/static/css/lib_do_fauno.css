/* === BIBLIOTECA DO FAUNO - Bookshelf Style System === */

/* --- Material 3 Expressive Color Tokens (HSL) --- */
:root {
  /* Tema Padrão: Fauno */
  --md-sys-color-primary: 68 60% 35%;
  --md-sys-color-on-primary: 40 25% 98%;
  --md-sys-color-primary-container: 68 40% 25%;
  --md-sys-color-on-primary-container: 40 25% 95%;
  --md-sys-color-surface: 40 25% 90%;
  --md-sys-color-on-surface: 25 25% 15%;
  --md-sys-color-surface-container-highest: 40 20% 85%;
  --md-sys-color-surface-container-high: 40 20% 88%;
  --md-sys-color-on-surface-variant: 25 15% 30%;
  --md-sys-color-outline: 25 10% 50%;
  --md-sys-color-scrim: 0 0% 0%;
  
  /* Legacy Variables (compatibilidade) */
  --paper-base: #F2E8D5;
  --ink-primary: #2A211C;
  --wood-dark: #4A3B2A;
  --moss-green: #556B2F;
  --shadow-soft: 0 4px 20px rgba(42, 33, 28, 0.1);
}

/* Tema alternativo: Dark (como no Bookshelf) */
[data-theme="dark"] {
  --md-sys-color-primary: 190 80% 60%;
  --md-sys-color-on-primary: 210 30% 10%;
  --md-sys-color-primary-container: 190 70% 30%;
  --md-sys-color-on-primary-container: 190 80% 90%;
  --md-sys-color-surface: 220 15% 12%;
  --md-sys-color-on-surface: 220 10% 90%;
  --md-sys-color-surface-container-highest: 220 15% 15%;
  --md-sys-color-surface-container-high: 220 15% 18%;
  --md-sys-color-on-surface-variant: 220 10% 70%;
  --md-sys-color-outline: 220 10% 40%;
}

/* --- CRITICAL FIX: Bootstrap Collapse Override --- */
/* The .collapse class was hiding navbar, menus, and all collapsible content */
.collapse {
  visibility: visible !important;
}

.collapse:not(.in) {
  display: none;
}

.collapse.in {
  display: block !important;
}

.navbar-collapse.collapse {
  display: block !important;
  height: auto !important;
  overflow: visible !important;
}

/* --- Base Styles --- */
body {
  font-family: 'Lato', 'Manrope', sans-serif;
  background-color: hsl(var(--md-sys-color-surface));
  background-image: url("{{ url_for('bookshelf.static', filename='images/paper-fibers.png') }}");
  background-repeat: repeat;
  color: hsl(var(--md-sys-color-on-surface));
  transition: background-color 0.3s ease, color 0.3s ease;
}

body.standard-ui {
  background-color: hsl(var(--md-sys-color-surface)) !important;
  color: hsl(var(--md-sys-color-on-surface)) !important;
}

/* --- Top Navbar (CRITICAL - Must be visible) --- */
.navbar.navbar-default {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  position: relative !important;
  z-index: 1000 !important;
  margin-bottom: 0 !important;
}

.navbar .container-fluid {
  display: block !important;
}

/* Navigation Rail positioning */
#desktop-nav {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 40 !important; /* Below navbar (z-1000) */
}

/* Increase icon and text sizes in Navigation Rail */
#desktop-nav .nav-item i {
  width: 24px !important;
  height: 24px !important;
}

#desktop-nav .nav-item span {
  font-size: 14px !important;
}

/* Ensure navbar stays above Navigation Rail */
.navbar.navbar-default {
  z-index: 1001 !important;
}

/* Ensure main content is not covered by expanded nav */
main {
  position: relative;
  z-index: 10;
}

/* --- Typography --- */
.font-display {
  font-family: "EB Garamond", serif;
  font-weight: 800;
}

.standard-ui h1,
.standard-ui h2,
.standard-ui h3,
.standard-ui h4,
.standard-ui .navbar-brand {
  font-family: "EB Garamond", serif !important;
  font-weight: 700 !important;
}

.title-text-shadow {
  text-shadow: 1px 1px 8px hsl(var(--md-sys-color-primary) / 0.5);
}

/* --- Card System (Material 3 Expressive) --- */
.card-expressive {
  border-radius: 32px;
  background-color: hsl(var(--md-sys-color-surface-container-high));
  transition: background-color 0.3s ease;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
  overflow: hidden;
}

.card-expressive:hover {
  background-color: hsl(var(--md-sys-color-surface-container-highest));
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.3);
}

/* --- Button System --- */
.btn-expressive {
  border-radius: 24px;
  padding: 12px 24px;
  height: 52px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  transition: all 0.2s ease-in-out;
  cursor: pointer;
  border: none;
}

.btn-primary {
  background-color: hsl(var(--md-sys-color-primary));
  color: hsl(var(--md-sys-color-on-primary));
}

.btn-primary:hover {
  filter: brightness(1.1);
  box-shadow: 0 4px 12px hsla(var(--md-sys-color-primary), 0.4);
}

.btn-tonal {
  background-color: hsl(var(--md-sys-color-primary-container));
  color: hsl(var(--md-sys-color-on-primary-container));
}

.btn-tonal:hover {
  filter: brightness(1.2);
}

.btn-text {
  color: hsl(var(--md-sys-color-primary));
  background: transparent;
}

.btn-text:hover {
  background-color: hsla(var(--md-sys-color-primary), 0.1);
}

/* --- Material Symbols --- */
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
}

.material-symbols-outlined.filled {
  font-variation-settings: 'FILL' 1;
}

/* --- Lucide Icons --- */
.lucide {
  width: 1.2em;
  height: 1.2em;
  stroke-width: 2;
  stroke: currentColor;
  fill: none;
  vertical-align: text-bottom;
  margin-right: 5px;
}

/* --- Navigation Rail --- */
#desktop-nav {
  background-color: rgba(23, 23, 23, 0.5) !important;
  backdrop-filter: blur(8px);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
}

/* --- Page Animations --- */
.page {
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --- Scrollbar Customization --- */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--md-sys-color-outline));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsla(var(--md-sys-color-primary), 0.5);
}

/* --- Book Cards --- */
.book-card-link {
  text-decoration: none;
  transition: all 0.3s ease-in-out;
}

.book-card-link:hover {
  transform: translateY(-4px);
  text-decoration: none;
}

/* Larger book covers */
.book-cover-container {
  aspect-ratio: 2/3;
  min-height: 280px;
}

@media (min-width: 768px) {
  .book-cover-container {
    min-height: 320px;
  }
}

@media (min-width: 1024px) {
  .book-cover-container {
    min-height: 360px;
  }
}

/* --- Pagination Styling (Bookshelf Style) --- */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin: 2rem auto;
  padding: 1rem;
  list-style: none !important;
}

.pagination .page-item {
  list-style: none;
}

.pagination .page-link {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 40px;
  height: 40px;
  padding: 8px 12px;
  border-radius: 12px;
  background-color: hsl(var(--md-sys-color-surface-container-high));
  color: hsl(var(--md-sys-color-on-surface));
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
  border: 1px solid hsla(var(--md-sys-color-outline), 0.2);
}

.pagination .page-link:hover {
  background-color: hsl(var(--md-sys-color-primary-container));
  color: hsl(var(--md-sys-color-on-primary-container));
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.pagination .page-item.active .page-link {
  background-color: hsl(var(--md-sys-color-primary));
  color: hsl(var(--md-sys-color-on-primary));
  box-shadow: 0 4px 12px hsla(var(--md-sys-color-primary), 0.3);
  border-color: transparent;
}

.pagination .page-item.page-next .page-link,
.pagination .page-item.page-previous .page-link {
  font-weight: 600;
  padding: 8px 16px;
}

/* --- Legacy Compatibility --- */
.row-fluid [class*="col-"] {
  margin-bottom: 20px;
}

[class*="col-"] img {
  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 2px;
  transition: transform 0.3s ease;
}

[class*="col-"]:hover img {
  transform: translateY(-5px);
}

.row-fluid {
  margin-bottom: 20px;
  border-bottom: none !important;
  box-shadow: none !important;
}

/* Hide ONLY the old sidebar navigation content, not the whole column */
.navigation {
  display: none !important;
}

.standard-ui .btn-primary:not(.btn-expressive),
.standard-ui .btn-success:not(.btn-expressive) {
  background-color: var(--moss-green) !important;
  border-color: var(--wood-dark) !important;
  font-family: "EB Garamond", serif !important;
}

.navbar {
  background-color: hsl(var(--md-sys-color-surface)) !important;
  background-image: url("{{ url_for('bookshelf.static', filename='images/paper-fibers.png') }}");
  border-bottom: 2px solid hsl(var(--md-sys-color-outline)) !important;
  box-shadow: none !important;
}

.navbar-default .navbar-nav > li > a,
.navbar-default .navbar-brand {
  color: hsl(var(--md-sys-color-on-surface)) !important;
}

.navigation,
#scnd-nav {
  border-right: 1px solid hsla(var(--md-sys-color-outline), 0.2);
}

#main-content {
  background: transparent !important;
}

.page {
  color: hsl(var(--md-sys-color-on-surface));
}

/* --- Book Cover Styling --- */
.book-cover-preview {
  width: 8rem;
  margin-left: auto;
  margin-right: auto;
  border-radius: 0.5rem;
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
}
